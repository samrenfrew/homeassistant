- binary_sensor:
  - name: 'home'
    unique_id: 'home_occupancy'
    device_class: occupancy
    state: >-
        {{ is_state('person.sam', 'home')
            or is_state('person.ady', 'home') }}
 
  # - name: 'lounge_occupancy'
  #   friendly_name: 'Lounge Occupancy'
  #   device_class: occupancy
  #   delay_off:
  #     minutes: 10
  #   value_template: >-
  #       {{ is_state('binary_sensor.lounge_motion', 'on') }}

- trigger:
    - platform: state
      entity_id: binary_sensor.home
  binary_sensor:
    - name: "home_10_minutes"
      unique_id: 'home_10_minutes'
      device_class: occupancy
      icon: mdi:clock-check-outline
      state: "{{ is_state('binary_sensor.home', 'on') }}"
      auto_off: 0:10:00

- trigger:
    - platform: state
      entity_id: binary_sensor.front_door
  binary_sensor:
    - name: "door_open_recently"
      unique_id: 'door_open_recently'
      device_class: door
      state: "{{ is_state('binary_sensor.front_door', 'on') }}"
      auto_off: 0:10:00

# - trigger:
#     - platform: state
#       entity_id: sensor.lounge_speaker_timers
#     - platform: state
#       entity_id: sensor.hallway_speaker_timers
#     - platform: state
#       entity_id: sensor.bedroom_speaker_timers
#   binary_sensor:
#     - name: "gh_timer_set"
#       unique_id: 'gh_timer_set'
#       state: >-
#         {{ not is_state('sensor.lounge_speaker_timers', 'unavailable')
#             or not is_state('sensor.hallway_speaker_timers', 'unavailable')
#             or not is_state('sensor.bedroom_speaker_timers', 'unavailable') }}

# - trigger:
#     - platform: state
#       entity_id: sensor.lounge_speaker_alarms
#     - platform: state
#       entity_id: sensor.hallway_speaker_alarms
#     - platform: state
#       entity_id: sensor.bedroom_speaker_alarms
#   binary_sensor:
#     - name: "gh_alarm_set"
#       unique_id: 'gh_alarm_set'
#       attributes:
#         friendly_name: "Alarm Set"
#       state: >-
#         {{ not is_state('sensor.lounge_speaker_alarms', 'unavailable')
#         or not is_state('sensor.hallway_speaker_alarms', 'unavailable')
#         or not is_state('sensor.bedroom_speaker_alarms', 'unavailable') }}